
但是对于 OS 内核，它一般都在高地址空间上。并且在 RISCV 中，内存（RAM）的物理地址也是从 0x80000000 开始的。因此接下来我们需要调整程序的内存布局，改变它的链接地址。

# 程序的内存布局

- .text段, 存放汇编代码
- .rodate, 只读数据段, 通常是常量
- .data 被初始化的可读写数据, 通常是全局变量
- .bss 存放被初始化为0的可读写数据, 故只需记录段大小以及所在位置, 不用记录数据
- stack
- heap



# 固件

>在计算中，固件是一种特定的计算机软件，它为设备的特定硬件提供低级控制进一步加载其他软件的功能。固件可以为设备更复杂的软件（如操作系统）提供标准化的操作环境，或者，对于不太复杂的设备，充当设备的完整操作系统，执行所有控制、监视和数据操作功能。 在基于 x86 的计算机系统中, BIOS 或 UEFI 是一种固件；在基于 riscv 的计算机系统中，OpenSBI 是一种固件。


# RISCV特权级

>riscv64 的 M Mode
M-mode(机器模式，缩写为 M 模式)是 RISC-V 中 hart(hardware thread,硬件线程)可以执行的最高权限模式。在 M 模式下运行的 hart 对内存,I/O 和一些对于启动和配置系统来说必要的底层功能有着完全的使用权。

>riscv64 的 S Mode
S-mode(监管者模式，缩写为 S 模式)是支持现代类 Unix 操作系统的权限模式，支持现代类 Unix 操作系统所需要的基于**页面的虚拟内存**机制是其核心。

