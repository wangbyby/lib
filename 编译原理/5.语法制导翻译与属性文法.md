# 5.语法制导翻译与属性文法

0. 引言
   - 属性文法 
     - 综合属性与继承属性
     - S_属性文法
     - L_属性文法


1. 概述
 - 语法分析的同时完成相应的**语义**处理
 - 语法结构有相应语义

2. 任务
    - 语义检查
      - 类型,运算
    - 翻译
      - 变量的储存分配, 表达式求值,语句的翻译
    - 要生成等价的代码

3. 关注``代码结构``
   1. 源和目标, 以及二者之间的关系

4. 典型处理方法
   1. 每个产生式对应一个语义子程序, 在``归约``的时候进行
   2. 在产生式右部的适当位置, 插入相应的语义动作, 按照分析的进程,执行遇到的语义动作

## 属性文法

- 属性定义
    - 三元组 A=(G,V,F)
      - G: 上下文无关文法
      - V: 属性的有穷集
      - F: 属性的计算规则

- 属性分类
  1. 综合属性
    - 产生式$A \rightarrow X_1X_2...X_n$
      - A.s = $f(c_1,c_2,...,c_k)$
      - $c_1,c_2,...,c_k$是$ X_1X_2...X_n$的属性和A的继承属性
      - A.s是根据其子节点的属性值计算出来的
    - 适于``归约分析``

  2. 继承属性
    - 产生式$A \rightarrow X_1X_2...X_n$
    - $X_i$的属性$X_i.in = f(c,c_1,c_2,...,c_{i-1})$
    - $c,c_1,c_2,...,c_{i-1}$是$A,X_1,X_2,...,X_{i-1}$的属性
    - 适于``派生分析``
  3. 固有属性
    - 语言中标识符, 常量,常数不变
    - 归类于**综合属性**

- 属性计算
    1. 综合属性
       1. 归约时计算
    2. 继承属性
       1. 根据``依赖图``决定计算顺序
    3. 固有属性

### S属性文法

``仅包含综合属性的属性文法``

>算术表达式

### L属性文法

- 定义: ``包含综合属性和继承属性的属性文法``
  - 没有强调一点有继承属性

- 计算
  - 深度优先从左到右
  - 计算时机
    - 继承属性计算前移

### 翻译模式

- 将语义动作**嵌入**到产生式的某个位置
- 表示形式: ``{...}``

